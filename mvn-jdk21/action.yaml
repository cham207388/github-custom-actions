name: Build Project

inputs:
  test:
    default: "no"
    description: "Run tests?"
    required: false

runs:
  using: "composite"
  steps:
  - name: Print Where I AM
    run: pwd
    shell: bash

  - name: Set up JDK
    uses: actions/setup-java@v4
    with:
      distribution: 'temurin'
      java-version: '21'

  - name: mvn clean
    run: mvn clean
    shell: bash

  - name: mvn package
    run: |
      if [[ "${{ inputs.test }}" == "yes" ]]; then
        mvn package
      else
        echo "Skipping tests"
        mvn package -Dmaven.test.skip
      fi
    shell: bash
